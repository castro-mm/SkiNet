import{a as J}from"./chunk-G6MHISKM.js";import{a as D}from"./chunk-MQHY6TSH.js";import{a as F}from"./chunk-GE6YFGY2.js";import{b as T}from"./chunk-55MNDU3M.js";import{b as h,c as $,f as I,i as N,k as p,l as z,m as f,n as R,q as _,s as H,t as E,u as M,w,y as g}from"./chunk-H4WQSJEQ.js";import{h as k,j as x,ja as y}from"./chunk-66ZLYJGL.js";import"./chunk-JGYM447R.js";import{Db as v,Eb as V,Gb as O,Hb as P,Ib as n,Jb as i,Kb as c,Rb as C,Tb as U,Wb as q,db as a,dc as m,eb as l,ec as S,lc as d,oa as u,wb as b,yb as s}from"./chunk-KOJY6QOY.js";var A=class r{constructor(t,e,o,L){this.fb=t;this.accountService=e;this.router=o;this.activatedRoute=L;let G=this.activatedRoute.snapshot.queryParams.returnUrl;G&&(this.returnUrl=G)}loginForm={};returnUrl="/shop";ngOnInit(){this.loginForm=this.fb.group({email:["",p.required],password:["",p.required]})}onSubmit(){this.accountService.login(this.loginForm.value).subscribe({next:()=>{this.accountService.getUserInfo().subscribe(),this.router.navigateByUrl(this.returnUrl)}})}static \u0275fac=function(e){return new(e||r)(l(w),l(T),l(x),l(k))};static \u0275cmp=u({type:r,selectors:[["app-login"]],standalone:!0,features:[d],decls:15,vars:1,consts:[[1,"max-w-lg","mx-auto","mt-32","p-8","bg-white"],[3,"ngSubmit","formGroup"],[1,"text-center","mb-6"],[1,"text-3xl","font-semibold","text-primary"],["appearance","outline",1,"w-full","mb-4"],["type","email","formControlName","email","placeholder","name@example.com","matInput",""],["type","password","formControlName","password","placeholder","Password","matInput",""],["mat-flat-button","","type","submit",1,"w-full","py-2"]],template:function(e,o){e&1&&(n(0,"mat-card",0)(1,"form",1),C("ngSubmit",function(){return o.onSubmit()}),n(2,"div",2)(3,"h1",3),m(4," Login "),i()(),n(5,"mat-form-field",4)(6,"mat-label"),m(7,"Email Address"),i(),c(8,"input",5),i(),n(9,"mat-form-field",4)(10,"mat-label"),m(11,"Password"),i(),c(12,"input",6),i(),n(13,"button",7),m(14,"Sign In"),i()()()),e&2&&(a(),s("formGroup",o.loginForm))},dependencies:[g,_,N,f,R,E,M,F,I,D,h,y]})};function Z(r,t){r&1&&(n(0,"mat-error"),m(1,"First name is required"),i())}function ee(r,t){r&1&&(n(0,"mat-error"),m(1,"Email is invalid"),i())}var B=class r{constructor(t){this.controlDir=t;this.controlDir.valueAccessor=this}label="";type="text";get control(){return this.controlDir.control}writeValue(t){}registerOnChange(t){}registerOnTouched(t){}static \u0275fac=function(e){return new(e||r)(l(z,2))};static \u0275cmp=u({type:r,selectors:[["app-text-input"]],inputs:{label:"label",type:"type"},standalone:!0,features:[d],decls:6,vars:6,consts:[["appearance","outline",1,"w-full","mb-4"],["matInput","",3,"type","formControl","placeholder"]],template:function(e,o){e&1&&(n(0,"mat-form-field",0)(1,"mat-label"),m(2),i(),c(3,"input",1),b(4,Z,2,0,"mat-error")(5,ee,2,0,"mat-error"),i()),e&2&&(a(2),S(o.label),a(),q("type",o.type),q("placeholder",o.label),s("formControl",o.control),a(),v(o.control.hasError("required")?4:-1),a(),v(o.control.hasError("email")?5:-1))},dependencies:[g,N,f,H,I,D,$,h]})};function te(r,t){if(r&1&&(n(0,"li"),m(1),i()),r&2){let e=t.$implicit;a(),S(e)}}function re(r,t){if(r&1&&(n(0,"div",8)(1,"ul",10),O(2,te,2,1,"li",null,V),i()()),r&2){let e=U();a(2),P(e.validationErrors)}}var j=class r{constructor(t,e,o,L){this.fb=t;this.accountService=e;this.router=o;this.snack=L}registerForm={};validationErrors=[];ngOnInit(){this.registerForm=this.fb.group({firstName:["",p.required],lastName:["",p.required],email:["",[p.required,p.email]],password:["",p.required]})}onSubmit(){this.accountService.register(this.registerForm.value).subscribe({next:()=>{this.snack.success("Registration successful - you can now login"),this.router.navigateByUrl("/account/login")},error:t=>{this.validationErrors=t,console.log(t)}})}static \u0275fac=function(e){return new(e||r)(l(w),l(T),l(x),l(J))};static \u0275cmp=u({type:r,selectors:[["app-register"]],standalone:!0,features:[d],decls:12,vars:3,consts:[[1,"max-w-lg","mx-auto","mt-32","p-8","bg-white"],[3,"ngSubmit","formGroup"],[1,"text-center","mb-6"],[1,"text-3xl","font-semibold","text-primary"],["label","First Name","formControlName","firstName","type","text"],["label","Last Name","formControlName","lastName","type","text"],["label","Email Address","formControlName","email","type","email"],["label","Password","formControlName","password","type","password"],[1,"mb-3","p-4","bg-red-100","text-red-600"],["mat-flat-button","","type","submit",1,"w-full","py-2",3,"disabled"],[1,"list-disc","px-3"]],template:function(e,o){e&1&&(n(0,"mat-card",0)(1,"form",1),C("ngSubmit",function(){return o.onSubmit()}),n(2,"div",2)(3,"h1",3),m(4,"Register"),i()(),c(5,"app-text-input",4)(6,"app-text-input",5)(7,"app-text-input",6)(8,"app-text-input",7),b(9,re,4,0,"div",8),n(10,"button",9),m(11,"Register"),i()()()),e&2&&(a(),s("formGroup",o.registerForm),a(8),v(o.validationErrors.length!==0?9:-1),a(),s("disabled",o.registerForm.invalid))},dependencies:[g,_,f,R,E,M,F,y,B]})};var _e=[{path:"account/login",component:A},{path:"account/register",component:j}];export{_e as accountRoutes};
